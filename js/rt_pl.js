var RTPlayer=function(a,b,c,d,e,f){this.ch_id=$(".bitrate-btn.active").attr("id"),this.vol=b,this.autoplay=c,this.ready=!1,this.timer_handle=!1,this.timer_time=0,this.host=d,this.format=e,this.stream=f,this._init()};RTPlayer.prototype={_formatTime:function(a){var b=function(a){return 10>a?"0"+a:a},c=Math.floor(a/3600),d=Math.floor(60*(a/3600%1)),e=a%60;return b(c)+":"+b(d)+":"+b(e)},_init:function(){var a=this;$("#rtJpID-"+this.ch_id).jPlayer({ready:function(){if($(this).jPlayer("setMedia",a.stream),a.ready=!0,a.autoplay){var c=navigator.userAgent.toLowerCase(),d=c.match(/(iphone|ipod|ipad|android|blackberry|iemobile)/);d||$("#play_btn-"+a.ch_id).trigger("click")}},swfPath:a.host+"/media/static/swf",supplied:a.format,wmode:"window",preload:"none",solution:"html, flash",pause:function(){$(this).jPlayer("clearMedia")},error:function(b){a.ready&&b.jPlayer.error.type===$.jPlayer.error.URL_NOT_SET?$(this).jPlayer("setMedia",a.stream).jPlayer("play"):"e_url"==b.jPlayer.error.type?$(this).jPlayer("setMedia",a.stream):a.ready&&($("#current_time-"+a.ch_id).html("\u041e\u0448\u0438\u0431\u043a\u0430"),clearInterval(a.timer_handle))}}),$("#rtplmute-"+this.ch_id).click(function(b){b.preventDefault(),$("#rtplmaxvol-"+a.ch_id).removeClass("active"),$("#rtplmute-"+a.ch_id).hasClass("active")?($("#rtplmute-"+a.ch_id).removeClass("active"),$("#rtJpID-"+a.ch_id).jPlayer("unrtplmute"),$("#slider-"+a.ch_id).slider("value",a.vol)):($("#rtplmute-"+a.ch_id).addClass("active"),$("#rtJpID-"+a.ch_id).jPlayer("rtplmute"),$("#slider-"+a.ch_id).slider("value",0))}),$("#rtplmaxvol-"+this.ch_id).click(function(b){b.preventDefault(),$("#rtplmute-"+a.ch_id).removeClass("active"),$("#rtplmaxvol-"+a.ch_id).hasClass("active")?($("#rtplmaxvol-"+a.ch_id).removeClass("active"),$("#slider-"+a.ch_id).slider("value",a.vol)):($("#rtJpID-"+a.ch_id).jPlayer("unrtplmute"),$("#rtplmaxvol-"+a.ch_id).addClass("active"),$("#rtJpID-"+a.ch_id).jPlayer("volume",1),$("#slider-"+a.ch_id).slider("value",100))}),$("#play_btn-"+this.ch_id).click(function(b){b.preventDefault(),$(this).hasClass("active")?($(this).attr("src","/pics/play.png"),$("#play_btn-"+a.ch_id).removeClass("active"),clearInterval(a.timer_handle),$("#rtJpID-"+a.ch_id).jPlayer("stop"),$("#current_time-"+a.ch_id).html("00:00:00"),a.timer_time=0,$("#rtJpID-"+a.ch_id).jPlayer("clearMedia")):($("[id^=rtJpID-]").each(function(b,c){if(c.id!="rtJpID-"+a.ch_id){var d=c.id.split("-");$("#play_btn-"+d[1]).hasClass("active")&&$("#play_btn-"+d[1]).trigger("click")}}),$("#rtJpID-"+a.ch_id).jPlayer("play"),$("#play_btn-"+a.ch_id).addClass("active"),$("#current_time-"+a.ch_id).html("\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),$("#rtJpID-"+a.ch_id).bind($.jPlayer.event.play,function(){$("#current_time-"+a.ch_id).html("00:00:00"),clearInterval(a.timer_handle),a.timer_handle=setInterval(function(){a.timer_time+=1,$("#current_time-"+a.ch_id).html(a._formatTime(a.timer_time))},1e3)}),$(this).attr("src","/pics/stop.png"))}),$("#slider-"+this.ch_id).slider({value:a.vol,orientation:"horizontal",range:"min",animate:!0,change:function(b,c){0==c.value?$("#rtplmute-"+a.ch_id).hasClass("active")||$("#rtplmute-"+a.ch_id).addClass("active"):100==c.value?$("#rtplmaxvol-"+a.ch_id).hasClass("active")||$("#rtplmaxvol-"+a.ch_id).addClass("active"):($("#rtplmute-"+a.ch_id).hasClass("active")&&$("#rtplmute-"+a.ch_id).removeClass("active"),$("#rtplmaxvol-"+a.ch_id).hasClass("active")&&$("#rtplmaxvol-"+a.ch_id).removeClass("active")),$("#rtJpID-"+a.ch_id).jPlayer("volume",c.value/100)}})}};