var RTPlayer=function(t,e,i,a,r,l){this.ch_id=t,this.vol=e,this.autoplay=i,this.ready=!1,this.timer_handle=!1,this.timer_time=0,this.host=a,this.format=r,this.stream=l,this._init()};RTPlayer.prototype={_formatTime:function(t){var e=function(t){return 10>t?"0"+t:t},i=Math.floor(t/3600),a=Math.floor(t/3600%1*60),r=t%60;return e(i)+":"+e(a)+":"+e(r)},_init:function(){var t=this;$("#rtJpID-"+this.ch_id).jPlayer({ready:function(e){if($(this).jPlayer("setMedia",t.stream),t.ready=!0,t.autoplay){var i=navigator.userAgent.toLowerCase(),a=i.match(/(iphone|ipod|ipad|android|blackberry|iemobile)/);a||$("#button_play_stop-"+t.ch_id).trigger("click")}},swfPath:t.host+"/media/static/swf",supplied:t.format,wmode:"window",preload:"none",solution:"html, flash",pause:function(){$(this).jPlayer("clearMedia")},error:function(e){t.ready&&e.jPlayer.error.type===$.jPlayer.error.URL_NOT_SET?$(this).jPlayer("setMedia",t.stream).jPlayer("play"):"e_url"==e.jPlayer.error.type?$(this).jPlayer("setMedia",t.stream):t.ready&&($("#current_time-"+t.ch_id).html("Ошибка"),clearInterval(t.timer_handle))}}),$("#rtplmute-"+this.ch_id).click(function(e){e.preventDefault(),$("#rtplmaxvol-"+t.ch_id).removeClass("active"),$("#rtplmute-"+t.ch_id).hasClass("active")?($("#rtplmute-"+t.ch_id).removeClass("active"),$("#rtJpID-"+t.ch_id).jPlayer("unrtplmute"),$("#slide-"+t.ch_id).slider("value",t.vol)):($("#rtplmute-"+t.ch_id).addClass("active"),$("#rtJpID-"+t.ch_id).jPlayer("rtplmute"),$("#slide-"+t.ch_id).slider("value",0))}),$("#rtplmaxvol-"+this.ch_id).click(function(e){e.preventDefault(),$("#rtplmute-"+t.ch_id).removeClass("active"),$("#rtplmaxvol-"+t.ch_id).hasClass("active")?($("#rtplmaxvol-"+t.ch_id).removeClass("active"),$("#slide-"+t.ch_id).slider("value",t.vol)):($("#rtJpID-"+t.ch_id).jPlayer("unrtplmute"),$("#rtplmaxvol-"+t.ch_id).addClass("active"),$("#rtJpID-"+t.ch_id).jPlayer("volume",1),$("#slide-"+t.ch_id).slider("value",100))}),$("#button_play_stop-"+this.ch_id).click(function(e){e.preventDefault(),$(this).hasClass("active")?($("#button_play_stop-"+t.ch_id).removeClass("active"),clearInterval(t.timer_handle),$("#rtJpID-"+t.ch_id).jPlayer("stop"),$("#current_time-"+t.ch_id).html("00:00:00"),t.timer_time=0,$("#rtJpID-"+t.ch_id).jPlayer("clearMedia")):($("[id^=rtJpID-]").each(function(e,i){if(i.id!="rtJpID-"+t.ch_id){var a=i.id.split("-");$("#button_play_stop-"+a[1]).hasClass("active")&&$("#button_play_stop-"+a[1]).trigger("click")}}),$("#rtJpID-"+t.ch_id).jPlayer("play"),$("#button_play_stop-"+t.ch_id).addClass("active"),$("#current_time-"+t.ch_id).html("Загрузка..."),$("#rtJpID-"+t.ch_id).bind($.jPlayer.event.play,function(e){$("#current_time-"+t.ch_id).html("00:00:00"),clearInterval(t.timer_handle),t.timer_handle=setInterval(function(){t.timer_time+=1,$("#current_time-"+t.ch_id).html(t._formatTime(t.timer_time))},1e3)}))}),$("#slide-"+this.ch_id).slider({value:t.vol,orientation:"horizontal",range:"min",animate:!0,change:function(e,i){0==i.value?$("#rtplmute-"+t.ch_id).hasClass("active")||$("#rtplmute-"+t.ch_id).addClass("active"):100==i.value?$("#rtplmaxvol-"+t.ch_id).hasClass("active")||$("#rtplmaxvol-"+t.ch_id).addClass("active"):($("#rtplmute-"+t.ch_id).hasClass("active")&&$("#rtplmute-"+t.ch_id).removeClass("active"),$("#rtplmaxvol-"+t.ch_id).hasClass("active")&&$("#rtplmaxvol-"+t.ch_id).removeClass("active")),$("#rtJpID-"+t.ch_id).jPlayer("volume",i.value/100)}})}};